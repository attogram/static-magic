<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Simon Says - Games</title>
    <link rel="stylesheet" href="../style.css" />
    <link rel="stylesheet" href="style.css" />
    <style>
      .game-container {
        max-width: 400px;
        margin: auto;
        text-align: center;
      }
      #simon-board {
        display: grid;
        grid-template-columns: repeat(2, 150px);
        grid-template-rows: repeat(2, 150px);
        gap: 20px;
        justify-content: center;
        margin: 20px 0;
      }
      .simon-pad {
        border-radius: 10px;
        cursor: pointer;
        opacity: 0.7;
        transition: all 0.2s;
      }
      .simon-pad.active {
        opacity: 1;
        transform: scale(1.05);
        box-shadow: 0 0 20px white;
      }
      #green {
        background-color: #28a745;
      }
      #red {
        background-color: #dc3545;
      }
      #yellow {
        background-color: #ffc107;
      }
      #blue {
        background-color: #007bff;
      }
    </style>
  </head>
  <body>
    <header id="main-header"></header>
    <nav id="main-nav"></nav>
    <main>
      <div class="container">
        <div class="game-container">
          <p id="game-status">Press "Start" to play.</p>
          <div id="simon-board">
            <div class="simon-pad" id="green"></div>
            <div class="simon-pad" id="red"></div>
            <div class="simon-pad" id="yellow"></div>
            <div class="simon-pad" id="blue"></div>
          </div>
          <button id="start-btn" class="btn">Start Game</button>
        </div>
        <section id="explanation" style="margin-top: 40px">
          <h3>How it Works</h3>
          <p>
            This is a memory game. The computer will light up a sequence of
            colored pads. You must repeat the sequence in the same order. Each
            round, the sequence gets one step longer. The game ends if you make
            a mistake.
          </p>
        </section>
      </div>
    </main>
    <footer id="main-footer"></footer>
    <button id="theme-switcher" class="btn">Dark Mode</button>
    <script src="../script.js"></script>
    <script>
      const pads = document.querySelectorAll(".simon-pad");
      const startBtn = document.getElementById("start-btn");
      const statusDisplay = document.getElementById("game-status");

      const colors = ["green", "red", "yellow", "blue"];
      let sequence = [];
      let playerSequence = [];
      let level = 0;
      let boardLocked = true;

      function nextRound() {
        level++;
        playerSequence = [];
        statusDisplay.textContent = `Round ${level}`;
        boardLocked = true;
        startBtn.style.display = "none";

        const nextColor = colors[Math.floor(Math.random() * colors.length)];
        sequence.push(nextColor);

        setTimeout(() => playSequence(), 500);
      }

      function playSequence() {
        let i = 0;
        const interval = setInterval(() => {
          if (i >= sequence.length) {
            clearInterval(interval);
            boardLocked = false;
            statusDisplay.textContent = "Your turn...";
            return;
          }
          lightUpPad(sequence[i]);
          i++;
        }, 600);
      }

      function lightUpPad(color) {
        const pad = document.getElementById(color);
        pad.classList.add("active");
        setTimeout(() => {
          pad.classList.remove("active");
        }, 300);
      }

      function handlePlayerInput(e) {
        if (boardLocked) return;
        const clickedColor = e.target.id;
        lightUpPad(clickedColor);
        playerSequence.push(clickedColor);

        const lastIndex = playerSequence.length - 1;
        if (playerSequence[lastIndex] !== sequence[lastIndex]) {
          statusDisplay.textContent = `Game Over! You reached round ${level}. Press Start to play again.`;
          boardLocked = true;
          startBtn.style.display = "inline-block";
          startBtn.textContent = "Play Again";
          return;
        }

        if (playerSequence.length === sequence.length) {
          boardLocked = true;
          statusDisplay.textContent = "Good! Next round...";
          setTimeout(nextRound, 1000);
        }
      }

      function startGame() {
        sequence = [];
        level = 0;
        nextRound();
      }

      startBtn.addEventListener("click", startGame);
      pads.forEach((pad) => pad.addEventListener("click", handlePlayerInput));
    </script>
  </body>
</html>
