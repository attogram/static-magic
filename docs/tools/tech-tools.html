<!doctype html>
<html lang="en">
  <head>
    <base href="/static-magic/" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tech Tools - Getting Interactive with GitHub Pages</title>
    <link rel="stylesheet" href="/style.css" />
    <style>
      .tool-nav {
        margin-bottom: 20px;
      }
      .tool-nav button {
        margin-right: 10px;
      }
      .tool-nav button.active {
        background-color: var(--nav-link);
        color: white;
      }
      .tool-pane {
        display: none;
      }
      .tool-pane.active {
        display: block;
      }
      .tool-pane textarea {
        width: 100%;
        min-height: 150px;
        box-sizing: border-box;
        font-family: monospace;
        margin-bottom: 10px;
      }
      .tool-pane label {
        display: block;
        margin-bottom: 5px;
      }
    </style>
  </head>
  <body>
    <header id="main-header"></header>

    <nav id="main-nav"></nav>

    <main>
      <div class="container">
        <section id="tools-intro">
          <h2>Client-Side Tech Tools</h2>
          <p>
            Many simple developer utilities can be built to run entirely in the
            browser. This is fast, secure, and works offline. Here are a few
            examples of common tools recreated with vanilla JavaScript.
          </p>
        </section>

        <div class="tool-nav">
          <button class="btn" data-tool="base64">Base64 Encoder/Decoder</button>
          <button class="btn" data-tool="url">URL Encoder/Decoder</button>
          <button class="btn" data-tool="counter">Text Counter</button>
        </div>

        <!-- Base64 Tool -->
        <div id="base64-tool" class="tool-pane">
          <h3>Base64 Encoder/Decoder</h3>
          <label for="base64-plain">Plain Text</label>
          <textarea id="base64-plain"></textarea>
          <label for="base64-encoded">Base64</label>
          <textarea id="base64-encoded"></textarea>
        </div>

        <!-- URL Tool -->
        <div id="url-tool" class="tool-pane">
          <h3>URL Encoder/Decoder</h3>
          <label for="url-plain">Decoded</label>
          <textarea id="url-plain"></textarea>
          <label for="url-encoded">Encoded</label>
          <textarea id="url-encoded"></textarea>
        </div>

        <!-- Counter Tool -->
        <div id="counter-tool" class="tool-pane">
          <h3>Text Counter</h3>
          <textarea
            id="counter-text"
            placeholder="Type or paste text here..."
          ></textarea>
          <p id="counter-output">Characters: 0, Words: 0, Lines: 0</p>
        </div>
      </div>
    </main>

    <footer id="main-footer"></footer>

    <button id="theme-switcher" class="btn">Dark Mode</button>

    <script src="/script.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // Tab switching logic
        const toolButtons = document.querySelectorAll(".tool-nav button");
        const toolPanes = document.querySelectorAll(".tool-pane");

        function switchTool(toolName) {
          toolButtons.forEach((b) => b.classList.remove("active"));
          const button = document.querySelector(
            `.tool-nav button[data-tool="${toolName}"]`
          );
          if (button) button.classList.add("active");

          toolPanes.forEach((pane) => {
            pane.classList.toggle("active", pane.id === `${toolName}-tool`);
          });
        }

        toolButtons.forEach((button) => {
          button.addEventListener("click", () => {
            switchTool(button.getAttribute("data-tool"));
          });
        });

        // --- Base64 Tool ---
        const base64Plain = document.getElementById("base64-plain");
        const base64Encoded = document.getElementById("base64-encoded");

        base64Plain.addEventListener("input", () => {
          try {
            base64Encoded.value = btoa(base64Plain.value);
          } catch (e) {
            base64Encoded.value =
              "Error: Invalid character for Base64 encoding.";
          }
        });
        base64Encoded.addEventListener("input", () => {
          try {
            base64Plain.value = atob(base64Encoded.value);
          } catch (e) {
            base64Plain.value = "Error: Invalid Base64 string.";
          }
        });

        // --- URL Tool ---
        const urlPlain = document.getElementById("url-plain");
        const urlEncoded = document.getElementById("url-encoded");

        urlPlain.addEventListener("input", () => {
          urlEncoded.value = encodeURIComponent(urlPlain.value);
        });
        urlEncoded.addEventListener("input", () => {
          try {
            urlPlain.value = decodeURIComponent(
              urlEncoded.value.replace(/\+/g, " ")
            );
          } catch (e) {
            urlPlain.value = "Error: Invalid URL encoding.";
          }
        });

        // --- Counter Tool ---
        const counterText = document.getElementById("counter-text");
        const counterOutput = document.getElementById("counter-output");

        counterText.addEventListener("input", () => {
          const text = counterText.value;
          const charCount = text.length;
          const wordCount =
            text.trim() === "" ? 0 : text.trim().split(/\s+/).length;
          const lineCount = text.split("\n").length;
          counterOutput.textContent = `Characters: ${charCount}, Words: ${wordCount}, Lines: ${lineCount}`;
        });

        // Set default tab
        switchTool("base64");
      });
    </script>
  </body>
</html>
